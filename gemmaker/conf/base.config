/*
 * -------------------------------------------------
 *  GEMmaker Nextflow base config file
 * -------------------------------------------------
 * A 'blank slate' config file, appropriate for general
 * use on most high performace compute environments.
 * Assumes that all software is installed and available
 * on the PATH. Runs in `local` mode - all jobs will be
 * run on the logged in environment.
 */

process {

  cpus = 1
  memory = "2 GB"
  time = "24h"

  errorStrategy = { task.exitStatus in [143,137,104,134,139] ? 'retry' : 'terminate' }
  maxRetries = 1
  maxErrors = '-1'

  withLabel:retrieve_sra_metadata {
    memory = "6 GB"
  }
  withLabel:local {
    executor = "local"
  }
  withLabel:fastqc {
    time = "24h"
  }
  withLabel:hisat2 {
    time = "48h"
  }
  withLabel:kallisto {
    time = "24h"
    memory = "6 GB"
  }
  withLabel:salmon {
    time = "24h"
  }
  withLabel:samtools {
    time = "48h"
  }
  withLabel:sratoolkit {
    time = "48h"
  }
  withLabel:stringtie {
    time = "48h"
  }
  withLabel:trimmomatic {
    time = "72h"
  }

  // Process-specific resource requirements
  // See https://www.nextflow.io/docs/latest/config.html#config-process-selectors
  withLabel:process_low {
    cpus = 1
    memory = "4 GB"
    time = "6h"
  }
  withLabel:process_medium {
    cpus = 2
    memory = "8 GB"
    time = "8h"
  }
  withLabel:process_high {
    cpus = 8
    memory = "16 GB"
    time = "10h"
  }
  withLabel:process_long {
    time = "20h"
  }
  withName:get_software_versions {
    cache = false
  }

}
